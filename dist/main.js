/**! Qoopido.rescale 3.0.1 | https://github.com/dlueth/qoopido.rescale | (c) 2017 Dirk Lueth */
!function(t,e,i,n){"use strict";function r(i,n,r,l,a){function o(){for(var t,e=0;t=p[e];e++)t.isVisible()&&u.call(t)}function u(){for(var e,i,n,r,l,a,o=this,u=h[o.uuid],c=o.getParent(),g=0;e=u.candidates[g];g++)if((!e.mql||e.mql.matches)&&(!e.selector||s.call(o,e.selector)))return i=u.image,u.visible&&(n=i.node.getBoundingClientRect(),r=u.settings.modifier({width:n.width,height:n.width*(e.ratio||u.ratio||c.offsetHeight/c.offsetWidth),scale:100*(t.devicePixelRatio||1)}),l=e.quality||u.quality,a=e.url.replace(f,"$1."+Math.round(r.width)+"x"+Math.round(r.height)+"@"+Math.round(r.scale)+(l?"."+l:"")+".$2"),i.setAttribute("src",a).emit("rescale",e.url,a)),void d.call(o,e.ratio);d.call(o)}function s(t){var i,n,r,l=this,a=e.querySelectorAll(t);if(a.length)for(i=l.node,n=0;r=a[n];n++)if(r===i)return!0;return l.getParent(t)}function c(){for(var t,e,i,n,l,a=this,o=a.getChildren('[itemprop="contentUrl"]'),s=[],c=0;t=o[c];c++)e=(e=t.getAttribute("width"))?parseInt(e):null,i=(i=t.getAttribute("height"))?parseInt(i):null,n=e&&i?i/e:null,l=(l=t.getAttribute("media"))?new r(l).on("match unmatch",function(){u.call(a)}):null,s.push({url:t.getAttribute("content"),ratio:n,quality:t.getAttribute("quality"),mql:l,selector:t.getAttribute("selector")});return s}function d(t){var e=this,i=h[e.uuid],n=i.parent;return i.container.setStyle("paddingBottom",100*(t||i.ratio||n.offsetHeight/n.offsetWidth)+"%"),e}function g(t,e){var r,a,o,s,f,m,b,v,w=n.call(this,t,e),y=w.uuid;for(a=w.getParent(),o=new i("<div />").setStyles({position:"relative",display:"block",width:"100%",height:0,padding:0}).appendTo(w),s=(r=w.getChildren('[itemprop="width"]')[0])?parseInt(r.getAttribute("content")):null,f=(r=w.getChildren('[itemprop="height"]')[0])?parseInt(r.getAttribute("content")):null,m=(r=w.getChildren('[itemprop="quality"]')[0])?parseInt(r.getAttribute("content")):null,b=(r=w.getChildren('[itemprop="caption"]')[0])?r.getAttribute("content"):null;0===a.offsetHeight;)a=a.parentNode;return v=h[y]={visible:!1,settings:l({},g.settings,e),ratio:s&&f?f/s:null,quality:m,parent:a,container:o,image:new i("<img />",{src:A,alt:b||""},{position:"absolute",display:"block",width:"100%",height:"100%",top:"0",left:"0",margin:"0",padding:"0"}).appendTo(o),candidates:c.call(w),caption:b},p.push(w),d.call(w).on("appear disappear",function(t){v.visible="appear"===t.type,u.call(w)})}var h={},p=[],f=/(.+?).(jpe?g|png|gif)$/i,A="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=";return g.settings={modifier:function(t){return t.scale=Math.min(200,t.scale),t}},new i(t).on("resize orientationchange",a(o)),g.extends(n)}n(["/nucleus/dom/element","/nucleus/dom/element/appear","/nucleus/component/sense","/nucleus/function/merge","/nucleus/function/debounce"],r)}(this,document,demand,provide);
//# sourceMappingURL=main.js.map
