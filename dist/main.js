/*! /main 1.0.0 | https://github.com/dlueth/qoopido.rescale | (c) 2016 Dirk Lueth */
!function(t,e,i,n){"use strict";function l(i,n,l,r,o){function a(){for(var t,e=0;t=g[e];e++)s.call(t)}function s(){for(var i,n,l,r,o,a=this,s=p[a.uuid],u=a.getParent(),d=0;i=s.candidates[d];d++)if((!i.mql||i.mql.matches)&&(!i.selector||e.querySelector(i.selector)))return n=s.image,s.visible&&(l=n.element.getBoundingClientRect(),r=s.settings.modifier({width:l.width,height:l.width*(i.ratio||s.ratio||u.offsetHeight/u.offsetWidth),scale:100*(t.devicePixelRatio||1)}),o=i.url.replace(f,"$1."+Math.round(r.width)+"x"+Math.round(r.height)+"@"+Math.round(r.scale)+".$2"),n.setStyle("visibility","hidden").one("load",function(){n.setStyle("visibility","visible")}).setAttribute("src",o)),void c.call(a,i.ratio);c.call(a)}function u(){for(var t,e,i,n,r,o=this,a=o.getChildren('[itemprop="contentUrl"]'),u=[],c=0;t=a[c];c++)e=(e=t.getAttribute("width"))?parseInt(e):null,i=(i=t.getAttribute("height"))?parseInt(i):null,n=e&&i?i/e:null,r=(r=t.getAttribute("media"))?new l(r).on("match unmatch",function(){s.call(o)}):null,u.push({url:t.getAttribute("content"),ratio:n,mql:r,selector:t.getAttribute("selector")});return u}function c(t){var e=this,i=e.getParent(),n=p[e.uuid];return n.container.setStyle("paddingBottom",100*(t||n.ratio||i.offsetHeight/i.offsetWidth)+"%"),e}function d(t,e){var l,o,a,d,f,m,b=n.prototype.constructor.call(this,t,e),v=b.uuid;return o=new i("<div />").setStyles({position:"relative",display:"block",width:"100%",height:0,padding:0}).appendTo(b),a=(l=b.getChildren('[itemprop="width"]')[0])?parseInt(l.getAttribute("content")):null,d=(l=b.getChildren('[itemprop="height"]')[0])?parseInt(l.getAttribute("content")):null,f=(l=b.getChildren('[itemprop="caption"]')[0])?l.getAttribute("content"):null,m=p[v]={visible:!1,settings:r({},h.settings,e),ratio:a&&d?d/a:null,container:o,image:new i("<img />",{src:A,alt:f||""},{position:"absolute",display:"block",width:"100%",height:"100%",top:"0",left:"0",margin:"0",padding:"0"}).appendTo(o),candidates:u.call(b),caption:f},g.push(b),c.call(b).on("appear disappear",function(t){m.visible="appear"===t.type,s.call(b)})}var h,p={},g=[],f=/(.+?).(jpe?g|png|gif)$/,A="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=";return new i(t).on("resize orientationchange",o(a)),h=n.extend(d),h.settings={modifier:function(t){return t.scale=Math.min(200,t.scale),t}},h}n(["/nucleus/dom/element","/nucleus/dom/element/appear","/nucleus/component/sense","/nucleus/function/merge","/nucleus/function/debounce"],l)}(this,document,demand,provide);
//# sourceMappingURL=main.js.map
